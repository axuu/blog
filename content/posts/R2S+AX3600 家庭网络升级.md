---
title: "R2S+AX3600 家庭网络升级"
date: 2021-09-19T15:05:53+08:00
draft: true
---

2018 年购入了 K2P，刷好固件可以应付 300M 的带宽，信号够用，在使用的两年中一直稳定无异常。20 年底搬进新家之后，宽带升级到了500M，原来的方案并不能跑满速度，且卧室死角无线信号较差，故升级。

核心思路仍然是追求网络稳定，并具备一定的自定义空间，满足偶尔折腾的需要。

## 新旧方案

|          | 旧方案  | 新方案                 |
| -------- | ------- | ---------------------- |
| 硬件     | K2P     | 友善 R2S + 小米 AX3600 |
| 固件     | Padavan | OpenWrt                |
| 购入渠道 | PDD     | 闲鱼                   |
| 价格     | 130     | 280 + 430              |

## 硬件选择

### R2S

优点：性能足够应付千兆，体积小巧，可以放进弱电箱

缺点：可能会有发热问题，需要额外增加金属壳、散热片、风扇等

### AX3600

优点：米家优秀的消费级 WiFi6 路由，此时新的旗舰 AX6000 已经上市，硬件却有所缩水，因此闲鱼老旗舰性价比很高

缺点：Mesh 漫游表现很差

## 网络拓扑

方案非常简单：光猫桥接 -> R2S 软路由拨号 -> AX3600 作为 AP

使用这样的方案有以下几个原因：

* 之前做了一些功课，这个组合是大多数人选择的主流方案，兼顾了性能、价格和稳定性。
* 部署简单，目前没有 NAS、Mesh 等复杂需求，如非必要，少折腾。
* 考虑到小米作为国内互联网公司，有一定用户隐私隐患，AX3600 只会担任 AP 的角色，而且无线硬件可单独配置、升级，出现问题不会影响主路由。

## 升级步骤

### 固件选择

没有在固件比较上花费时间，而是直接选择了主流的 OpenWrt

### 固件来源

固件有两种获取方式

* Fork OpenWrt 在 Github 上的项目，自己进行编译：安全，门槛较高
* 下载别人编译好的固件：需要仔细甄别，任何固件都可能存在后门

### 刷入固件

需要读卡器和TF卡，固件为 img.gz 格式

Win 和 MacOS 都可刷，可以使用 balenaEtcher

### 部署硬件

* 提前连接 AX3600，设置为 AP 模式，在小米 WiFi 的管理系统中叫「无线中继模式」，更改模式会修改 AX3600 的管理账号和 IP，记下方便后续维护
* 刷好固件的 TF 卡插入 R2S
* 连接网线：
  * 光猫 LAN 口 -> R2S WAN 口
  * R2S LAN 口 -> AX3600 任意口，因为此时 AX3600 是 AP 模式，所以所有的网口都是 WAN 口
* 给所有设备通电，R2S 通电即自动开机

### 设置固件

* 电脑连接 Wifi ，网络设置中看是 IP 否正确下发，若非则重新连接网线重启设备
* 在 OpenWrt 中拨号，整体的家庭网络即可运行
* 可按自己需求在 R2S 中自主配置代理、去广告等插件功能

## 一些问题

1. AX3600体积大，真的大，一共7根天线，是K2P的2倍还多，为了美观，我把它藏在了木制电视柜里，没有影响信号。
2. 固件配置问题
